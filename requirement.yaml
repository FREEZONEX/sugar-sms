# -----------------------------------------------------------
#               数据库资源申请定义
# ======================database=============================
# 当resourceType为mariadb、mysql时，申请的数据库资源会以环境变量
# 的方式传递给APP应用，具体变量名如下：
#
# SUPOS_<UpperCase(name)>_DBNAME: 数据库名称
# SUPOS_<UpperCase(name)>_USERNAME: 数据库用户名
# SUPOS_<UpperCase(name)>_PASSWORD: 数据库密码
# SUPOS_<UpperCase(name)>_HOST: 数据库访问地址
# SUPOS_<UpperCase(name)>_PORT: 数据库访问端口
# ======================oss==================================
# 当申请到OSS资源的URL访问路径后，将以环境变量的方式传递给APP应用，
# 具体变量如下：
#
# SUPOS_OSS_<UpperCase(name)>_NAME_URL: OSS资源访问路径
# -----------------------------------------------------------
# 安装包版本。必填。固定值
apiVersion: v3alpha3
# 资源申请列表
requirements:
  # 申请天湖数据库资源。非必填。
  databases:
    # 数据库名称。必填。注意：此名称并非真实分配的数据库名称，系统会根据一定的约束重新命名数据库名。
    - name: sugar
      # 资源类型。必填。当前支持：mariadb,tsdb，postgres
      resourceType: postgres
      # 使用平台库。必填。值为：allow和reject。默认值为reject。
      apply: reject
  # 申请持久卷资源。非必填。
  volumes:
    # 持久卷名称。必填项。注意：此名称将会在compose.yaml文件中使用。
    - name: postgres
      # 持久卷类型。必填项。取值：pvc=网络盘，local=本地盘（即当前机器的硬盘）。
      resourceType: pvc
      # 空间大小。非必填。当resourceType=pvc时必填。格式为：100Mi、1Gi
      size: 1Gi
      # 本地被持载路径。非必填。当resourceType=local时必填。
      localPath: /tmp
  # 申请天湖的文件存储资源。非必填。
#  oss:
#    # 资源名称。必填项。
#    - name: xyz
#      # 安全策略。必填项。值为：auth=认证中心认证，none=不认证。默认为auth
#      securityPolicy: auth
#      # 是否支持外部访问。必填项。值为：inner=supOS内部访问，outer=支持supOS外部访问
#      callPolicy: inner